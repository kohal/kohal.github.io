---
    layout: post
    title: 带着问题看源码
---

## 1. netty
- netty的 **ServerBootstrap.group(bossGroup,workerGroup)**这个两个EventLoopGroup是怎么转接分配的？
    * bossGroup处理channel连接的i/o事件

    * netty工程中4.1 和 master分支代码实现不一致，NioEventLoop 和 NioHandler,Nio selector的代码在这边，rebuildSelector去解决了jdk nio空轮询的bug。

    * processSelectedKeysOptimized()处理i/o事件 ---> AbstractNioChannel anc= SelectionKey k.attachment(); ---> AbstractNioChannel(EventLoop)

    * 然后需要关注的是 NioEventLoop.register()调用，AbstractNioChannel是怎么被attached(附加)上SelectionKey的？

- netty的ByteBuf的readIndex,writeIndex? channel.write(),flush()

    * 用两个指针readIndex,writeIndex代替了nio buffer的flip(),write read model切换







